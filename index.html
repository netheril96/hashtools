<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script>
        'use strict';
        function main() {
            const encoder = new TextEncoder();

            async function hashAndFill(hashName) {
                const text = document.getElementById('mainText').value;
                const data = encoder.encode(text);
                const buffer = await crypto.subtle.digest(hashName, data);
                document.getElementById(hashName + '-Text').value = buf2hex(buffer);
            }

            document.getElementById('generateButton').addEventListener('click', () => {
                hashAndFill('SHA-256');
                hashAndFill('SHA-384');
                hashAndFill('SHA-512');
            });

            document.querySelectorAll('.shagroup input').forEach(v => {
                v.addEventListener('click', () => {
                    navigator.clipboard.writeText(v.value)
                        .then(
                            () => alert('Copied hash value ' + v.value)
                        );
                });
            });
        }

        function buf2hex(buffer) { // buffer is an ArrayBuffer
            return [...new Uint8Array(buffer)]
                .map(x => x.toString(16).padStart(2, '0'))
                .join('');
        }

        document.addEventListener('DOMContentLoaded', main);
    </script>
    <style>
        #mainText {
            width: 94gi%;
            height: 6em;
            margin-bottom: 0.6em;
            position: relative;
            left: -0.1em;
        }

        .shagroup input {
            width: calc(95% - 7em);
            height: 2em;
            right: 0;
        }

        .shagroup {
            height: 2.4em;
        }

        #generateButton {
            width: 95%;
            height: 3em;
        }
    </style>
</head>

<body>
    <h1>Hashes</h1>
    <div id="container">
        <textarea id="mainText"></textarea>
        <div>
            <div class="shagroup">
                <label for="SHA-256-Text">SHA-256:&nbsp;&nbsp;&nbsp;&nbsp;</label>
                <input type="text" id="SHA-256-Text" readonly="readonly">
            </div>
            <div class="shagroup">
                <label for="SHA-384-Text">SHA-384:&nbsp;&nbsp;&nbsp;&nbsp;</label>
                <input type="text" id="SHA-384-Text" readonly="readonly">
            </div>
            <div class="shagroup">
                <label for="SHA-512-Text">SHA-512:&nbsp;&nbsp;&nbsp;&nbsp;</label>
                <input type="text" id="SHA-512-Text" readonly="readonly">
            </div>
        </div>
        <div>
            <input type="button" id="generateButton" value="Compute">
        </div>
    </div>

</body>

</html>