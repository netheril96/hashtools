<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <script>
        'use strict';
        function main() {
            const encoder = new TextEncoder();

            async function hashAndFill(hashName) {
                const text = document.getElementById('mainText').value;
                const data = encoder.encode(text);
                const buffer = await crypto.subtle.digest(hashName, data);
                document.getElementById(hashName + '-Text').value = buf2hex(buffer);
            }

            document.getElementById('generateButton').addEventListener('click', () => {
                hashAndFill('SHA-256');
                hashAndFill('SHA-384');
                hashAndFill('SHA-512');
            });

            document.querySelectorAll('input[id^="SHA"]').forEach(v => {
                v.addEventListener('click', () => {
                    navigator.clipboard.writeText(v.value)
                        .then(
                            () => alert('Copied hash value ' + v.value)
                        );
                });
            });
        }

        function buf2hex(buffer) { // buffer is an ArrayBuffer
            return [...new Uint8Array(buffer)]
                .map(x => x.toString(16).padStart(2, '0'))
                .join('');
        }

        document.addEventListener('DOMContentLoaded', main);
    </script>
</head>

<body>
    <h1>Hashes</h1>
    <textarea id="mainText"></textarea>
    <div>
        <div>
            <label for="SHA-256-Text">SHA-256: </label>
            <input type="text" id="SHA-256-Text" readonly="readonly">
        </div>
        <div>
            <label for="SHA-384-Text">SHA-384: </label>
            <input type="text" id="SHA-384-Text" readonly="readonly">
        </div>
        <div>
            <label for="SHA-512-Text">SHA-512: </label>
            <input type="text" id="SHA-512-Text" readonly="readonly">
        </div>
    </div>
    <div>
        <input type="button" id="generateButton" value="Compute">
    </div>
</body>

</html>